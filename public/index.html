<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FatiBlog</title>
    <link rel="stylesheet" href="./styles/main-style.css">
</head>
<body dir="rtl">
  <div class="container">
     <header class="header">
        <a href="./dashboard.html">شاهد جميع مقالاتك من هنا</a>
     </header>
     <h4 class="heading_primary">إضافة مقال جديد</h4>
     <form action="" class="form">
        <div class="form_gp">
          <input type="text"  name="title" class="form_input">
          <label for="title" id="lb">أدخل عنوان المقال</label>
        </div>
        <div class="form_gp">
          <textarea class="form_text" name='text' id="txt" cols="30" rows="10" placeholder="أكتب المقال ..."></textarea>
        </div>
        <div class="form_gp">
          <select name="description" id="">
            <option value="رياضة">رياضة</option>
            <option value="">موضة و أزياء</option>
            <option value="صحة و غذاء">صحة و غذاء</option>
            <option value="أخبار المشاهير">أخبار المشاهير</option>
            <option value="فضائح">فضائح</option>
            <option value="مقاطع ساخنة">مقاطع ساخنة</option>
          </select>
        </div>
        <div class="form_gp">
          <label for="photo"></label>
          <input type="file" name="photo" id="" accept="png jpg jpeg web">
        </div>
        <div class="form_gp">
          <input type="submit" class="form_btn" value="أضف المقال">
        </div>
     </form>
  </div>
  <script>
    const form = document.querySelector('.form');
    const inputTitle = document.querySelector('input[type="text"]');
    
    inputTitle.addEventListener('keypress', e => {
      document.getElementById('lb').style.display = 'none';
    });

     

    const sendData = async (e) => {
         try{
          e.preventDefault();
          const fm = new FormData(form);
          fm.append('text', document.getElementById('txt').value);
          const res = await fetch('https://fatiblog.onrender.com/api/v1/blog/createblog', {
            method: 'POST',
            body: fm
          });
          const result = await res.json();

          console.log(result);

         }catch(err){
          console.log(err)
         }
    };

    form.addEventListener('submit', sendData);
  </script>
</body>
</html>